{% extends "mainapp/base.html" %}
{% load static %}

{% block contents %}
	<!-- Content section -->
	<section id="et-search-event" class="container-fluid pt-0">
		<div class="row m-0">

			<!-- Search Area -->
			<div class="col-lg-8 p-0">
				<!-- Filter -->
				<div id="et-filter-row" class="container-fluid pt-3 pb-3 bg-primary text-white">
					<div class="container">
						<div class="d-sm-flex align-items-center">
							<div class="d-flex mb-3 mb-sm-0 align-items-center">
								<h5 class="small m-0 pr-2 d-none d-md-block text-white">Search result(s) for:</h5> <p class="small m-0">Events nearby ({{ events.count }} results)</p>
							</div>
							<div class="ml-auto d-flex align-items-center">
								<label class="pr-3 mb-0">Sort: </label>
								<select class="bg-white form-control pb-0 pt-0 pl-4 mb-0" name="sort">
									<option value="most_viewed">Most Viewed</option>
									<option value="most_recent">Most Recent</option>
									<option value="most_liked">Most Liked</option>
								</select>
								<div class="ml-auto">
									<span id="event-grid-view" class="p-2 ml-auto"><i class="icon-menu pointer"></i></span>
									<!-- <span id="event-list-view" class="p-2 ml-auto"><i class="icon-list pointer"></i></span> -->
									<span id="toggle-filter" class="p-2 ml-auto"><i class="fas fa-filter pointer"></i></span>
								</div>
							</div>
						</div>
					</div>
				</div>
				<!-- Form -->
				<div class="search-filter pl-4 pr-4">
					<form class="form" action="#" method="get" autocomplete="off">
						<div class="row mt-3">
							<div class="col-md-6">
								<div class="form-group">
									<div class="input-group">
										<input list="descriptions" name="description" placeholder="What are you looking for?" class="form-control bg-light" type="text">
										<div class="input-group-append">
											<a href="#" class="input-group-text text-decoration-none transition bg-primary border-0 text-white">
												<i class="icon-search-2"></i>
											</a>
										</div>

										<datalist id="descriptions">
											{% for i in category %}
											<option value="{{i.name}}"></option>
											{% endfor %}
										</datalist>

									</div>
								</div>
							</div>
							<div class="col-md-6">
								<div class="form-group">
									<div class="input-group">
										<input id="searchInput" name='location' placeholder="Location" class="form-control bg-light" type="text">
										<div class="input-group-append">
											<a href="#" class="input-group-text text-decoration-none transition bg-primary border-0 text-white">
												<i class="icon-maps-and-location"></i>
											</a>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-md-4">
								<div class="form-group">
									<select class="bg-light form-control wide w-100 pb-0 pt-0 pl-4 mb-3 mb-md-0" name="category">
										{% for i in category %}
										<option value="{{ i.id }}">{{ i.name }}</option>
										{% endfor %}
									</select>
								</div>
							</div>
							<div class="col-md-4">
								<div class="form-group">
									<div class="form-group position-relative">
										<input name="start_time" size="16" type="text" placeholder="From" readonly class="form-control bg-light form_datetime">
										<i class="icon-clock input-icon"></i>
									</div>
								</div>
							</div>
							<div class="col-md-4">
								<div class="form-group">
									<div class="form-group position-relative">
										<input name="end_time" size="16" type="text" placeholder="To" readonly class="form-control bg-light form_datetime">
										<i class="icon-clock input-icon"></i>
									</div>
								</div>
							</div>
						</div>
						<!-- <div class="row">
							<div class="col">
								<div class="form-group">
									<label>Price Range:</label>
									<input type="text" class="js-range-slider" name="price_range" value="" />
								</div>
							</div>
							<div class="col">
								<div class="form-group">
									<label>Radius(KM):</label>
									<input type="text" class="js-range-slider" name="radius" value="" />
								</div>
							</div>
						</div> -->
						<div class="row justify-content-end pb-3">
							<div class="col-6 d-flex justify-content-end">
								<div class="position-relative border-0 mt-md-0 mt-3 btn btn-primary submit-btn">
									<i class="icon-tick btn-icon input-icon"></i> Search
									<input name='search' type="submit" class="h-100 w-100 position-absolute" value="Submit">
								</div>
								<a href="{% url 'events:event-search' %}" class="btn btn-primary ml-3">X Remove filter</a>
							</div>
						</div>
					</form>
				</div>

				<!-- Events -->
				<div class="event-results pl-4 pr-md-4">
					<!-- Grid View -->
					<div class="row grid-view scrollbar-inner scroll-content">
						{% for i in events %}
						<div class="col-md-6 mt-3 mb-3">
							<div class="blog-grid w-100 mt-4 rounded shadow" style="min-width: 400px;">
								<div class="image-wrap position-relative">
									<!-- <span class="badge badge-primary listings photocount position-absolute">110 Listings</span> -->
									<img src="{{ i.featured_image.url }}" alt="img" class="img-fluid rounded-top event-featured-image">
								</div>
								<div class="content p-4">
									<span class="text-muted"><i class="icon-clock text-primary"></i> &nbsp;Posted {{ i.days_since_created }}</span>
									<span class="text-primary float-right">{{ i.price_val }}</span>
									<hr>
									<h4 class="mb-3"><a href="{% url 'events:event-detail' i.uid %}" class="text-decoration-none text-reset">{{ i.title }}</a></h4>
									<p class="description">
										{{ i.description|truncatechars:30}}
									</p>
									<div class="info">
										<div class="mb-2"><i class="icon-clock"></i>&nbsp; {{ i.start_date|date:"d M Y" }} - {{ i.end_date|date:"d M Y" }}</div>
										<div class="mb-2"><i class="icon-contact"></i>&nbsp; {{ i.email }}</div>
										<div><i class="icon-phone"></i>&nbsp; {{ i.phone }}</div>
									</div>
									<hr>
									<div class="time-left mt-4 d-inline-block pt-2 pt-md-0" end_date = "{{ i.end_date_js_format }}">
										<div class="timer search">
											<div class="days d-none"></div>
											<div class="hours text-primary-flat"></div>
											<div class="minutes text-secondary-flat"></div>
											<div class="seconds"></div>
										</div>
									</div>
									<a href="{% url 'events:add-calendar' i.uid %}" class="position-relative float-right border-0 mt-3 btn btn-primary btn-small submit-btn">
										<i class="icon-calendar btn-icon input-icon"></i> Schedule
										<input type="submit" class="h-100 w-100 position-absolute" value="Discover Now">
									</a>
								</div>
							</div>
						</div>
						{% endfor %}
					</div>

					<!-- List view -->
					<!-- <div class="row list-view scroll-content">
						<div class="d-flex mt-3 align-items-center">
							<a href="#" class="position-relative thumb d-block text-decoration-none">
								<img src="{% static 'img/event-grid-1.jpg' %}" class="img-fluid" alt="event">
							</a>
							<a href="#" class="event p-3 d-block text-decoration-none text-reset">
								<h4 class="d-inline-block">Food Festival</h4>
								<span class="pl-3"><i class="icon-clock text-primary"></i> 29 Feb, 2020</span>
								<span class="badge badge-primary pointer float-right"><i class="icon-heart"></i></span>
								<p class="mt-2 mb-0">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor...</p>
								<small class="tm">Time left</small>
								<hr>
								<div class="time-left mt-2 d-inline-block pt-2 pt-md-0">
									<div class="timer search">
										<div class="days d-none">124<span>Days</span></div>
										<div class="hours text-primary-flat">15<span>Hr</span></div>
										<div class="minutes text-secondary-flat">53<span>Min</span></div>
										<div class="seconds">58<span>Sec</span></div>
									</div>
								</div>
								<div class="position-relative border-0 btn btn-primary btn-small transform-origin-right float-right submit-btn">
									<i class="icon-calendar btn-icon input-icon"></i> Schedule
									<input type="submit" class="h-100 w-100 position-absolute" value="Discover Now">
								</div>
							</a>
						</div>
					</div> -->
				</div>
			</div>
			<!-- Map Division -->
			<div class="col-lg-4 p-0">
				<div class="search-map h-100">
					<div id="map" class="w-100 h-100"></div>
				</div>
			</div>
		</div>
	</section>

	{% include 'mainapp/auth_modals.html' %}
{% endblock contents %}